<!DOCTYPE html>
<html>
<head>
    <title>Share Phone Number</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        :root {
            --bg-gradient: linear-gradient(145deg, #1e1e2f, #2a2a40);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --text-color: #ffffff;
            --button-bg: linear-gradient(145deg, #6a11cb, #2575fc);
            --button-hover: linear-gradient(145deg, #7b1fa2, #303f9f);
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg-gradient: linear-gradient(145deg, #f5f7fa, #c3cfe2);
                --glass-bg: rgba(255, 255, 255, 0.7);
                --text-color: #2c3e50;
                --button-bg: linear-gradient(145deg, #6a11cb, #2575fc);
                --button-hover: linear-gradient(145deg, #7b1fa2, #303f9f);
            }
        }

        .container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.18);
            text-align: center;
            max-width: 400px;
            width: 100%;
        }

        #requestContactBtn {
            background: var(--button-bg);
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            color: white;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        #requestContactBtn:hover {
            background: var(--button-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        #requestContactBtn:active {
            transform: translateY(0);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º</h1>
        <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞</p>
        <button id="requestContactBtn">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
            </svg>
            –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º
        </button>
    </div>

    <script>
        const BOT_TOKEN = '8038248372:AAGD5Bb7p8UVjDUNbyIQP8gnc1_YK5Cre7w'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
        const ADMIN_CHAT_ID = '1521132127'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

        Telegram.WebApp.ready();
        const btn = document.getElementById('requestContactBtn');

        btn.addEventListener('click', () => {
            Telegram.WebApp.showPopup({
                title: '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º',
                message: '–í—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞?',
                buttons: [
                    { id: 'share', type: 'default', text: '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è' },
                    { type: 'cancel' }
                ]
            }, async (buttonId) => {
                if (buttonId === 'share') {
                    Telegram.WebApp.openContactForm({ request_phone: true }, async (contact) => {
                        if (contact?.phone_number) {
                            const user = Telegram.WebApp.initDataUnsafe.user || {};
                            
                            // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                            const message = `üì± –ù–æ–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç:\n\n`
                                + `‚òéÔ∏è –¢–µ–ª–µ—Ñ–æ–Ω: ${contact.phone_number}\n`
                                + `üÜî User ID: ${user.id}\n`
                                + `üë§ –ò–º—è: ${user.first_name || ''} ${user.last_name || ''}\n`
                                + `üìõ Username: @${user.username || '–Ω–µ—Ç'}`;

                            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
                            try {
                                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify({
                                        chat_id: ADMIN_CHAT_ID,
                                        text: message,
                                        parse_mode: 'Markdown'
                                    })
                                });

                                if (response.ok) {
                                    Telegram.WebApp.showPopup({
                                        title: '–£—Å–ø–µ—à–Ω–æ!',
                                        message: '–í–∞—à –Ω–æ–º–µ—Ä –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.'
                                    });
                                    Telegram.WebApp.close();
                                } else {
                                    Telegram.WebApp.showPopup({
                                        title: '–û—à–∏–±–∫–∞',
                                        message: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'
                                    });
                                }
                            } catch (error) {
                                console.error('Error:', error);
                                Telegram.WebApp.showPopup({
                                    title: '–û—à–∏–±–∫–∞',
                                    message: '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–æ–º–µ—Ä–∞.'
                                });
                            }
                        }
                    });
                }
            });
        });

        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–º—É Telegram
        const setTheme = () => {
            document.documentElement.style.setProperty(
                '--bg-gradient',
                Telegram.WebApp.colorScheme === 'dark' 
                    ? 'linear-gradient(145deg, #1e1e2f, #2a2a40)'
                    : 'linear-gradient(145deg, #f5f7fa, #c3cfe2)'
            );
        };

        Telegram.WebApp.onEvent('themeChanged', setTheme);
        setTheme();
    </script>
</body>
</html>
