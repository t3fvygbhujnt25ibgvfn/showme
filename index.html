<!DOCTYPE html>
<html>
<head>
    <title>Request Contact</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <button id="requestContactBtn" style="padding: 15px; font-size: 18px;">
        üì± –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    </button>

    <script>
        Telegram.WebApp.ready();
        const btn = document.getElementById('requestContactBtn');
        
        // ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï! –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –≤–∏–¥–µ–Ω –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ
        const BOT_TOKEN = '8038248372:AAGD5Bb7p8UVjDUNbyIQP8gnc1_YK5Cre7w';
        const ADMIN_CHAT_ID = '1521132127';

        btn.addEventListener('click', () => {
            Telegram.WebApp.openContactForm({ request_phone: true }, async (contact) => {
                if (contact?.phone_number) {
                    const user = Telegram.WebApp.initDataUnsafe.user || {};
                    
                    // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    const message = `üì± –ù–æ–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç:\n\n`
                        + `‚òéÔ∏è –¢–µ–ª–µ—Ñ–æ–Ω: ${contact.phone_number}\n`
                        + `üÜî User ID: ${user.id}\n`
                        + `üë§ –ò–º—è: ${user.first_name || ''} ${user.last_name || ''}\n`
                        + `üìõ Username: @${user.username || '–Ω–µ—Ç'}`;

                    // –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ API Telegram
                    try {
                        const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                chat_id: ADMIN_CHAT_ID,
                                text: message,
                                parse_mode: 'Markdown'
                            })
                        });

                        if (response.ok) {
                            Telegram.WebApp.close();
                        } else {
                            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', await response.json());
                        }
                    } catch (error) {
                        console.error('Network error:', error);
                    }
                }
            });
        });
    </script>
</body>
</html>
